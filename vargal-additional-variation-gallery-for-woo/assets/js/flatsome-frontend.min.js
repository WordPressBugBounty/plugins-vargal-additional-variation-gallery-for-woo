!function(a){"use strict";"undefined"!=typeof vargal_params&&"undefined"!=typeof wc_single_product_params&&(vargal_params.flatsome_default_product_gallery={},vargal_params.flatsome_default_product_gallery_thumb={},a(document).on("wc-product-gallery-before-init",".vargal-product-gallery",(function(l,e,r){let t=a(e);if(!t.length)return;if(!t.closest(".product-gallery").find(".vargal-flatsome-product-gallery-thumb").length)return;let o,c=t.attr("class").split(" ");if(c.length)for(let a of c)if(a.includes("vargal-product-gallery-product-")){o=a.replace("vargal-product-gallery-product-","");break}o&&(vargal_params.flatsome_default_product_gallery[o]||(vargal_params.flatsome_default_product_gallery[o]=t.find(".woocommerce-product-gallery__wrapper").clone()),vargal_params.flatsome_default_product_gallery_thumb[o]||(t.closest(".product-gallery").find(".vertical-thumbnails").length?vargal_params.flatsome_default_product_gallery_thumb[o]=t.closest(".product-gallery").find(".vertical-thumbnails").clone():vargal_params.flatsome_default_product_gallery_thumb[o]=t.parent().find(".vargal-flatsome-product-gallery-thumb").clone()),1===t.find(".woocommerce-product-gallery__image").length&&(t.closest(".product-gallery").find(".vertical-thumbnails").remove(),t.parent().find(".vargal-flatsome-product-gallery-thumb").remove()),t.find(".woocommerce-product-gallery__wrapper").removeClass("has-image-zoom"),t.addClass("vargal-flatsome-product-gallery"),t.data("vargal_render_type","flatsome"))})),a(document).on("vargal-flatsome-gallery-render",(function(l,e,r,t,o,c){let d=a(".vargal-flatsome-product-gallery.vargal-product-gallery-product-"+e);if(console.log("vargal-flatsome-gallery-render : "+e),!d.length)return!1;let s,i=vargal_params.flatsome_default_product_gallery[e].clone(),n=vargal_params.flatsome_default_product_gallery_thumb[e].clone();i.html(c),d.find(".woocommerce-product-gallery__wrapper").removeData("flexslider"),d.find(".woocommerce-product-gallery__wrapper").flickity&&d.find(".woocommerce-product-gallery__wrapper").flickity("destroy"),d.find(".woocommerce-product-gallery__wrapper").replaceWith(i),n.hasClass("vertical-thumbnails")?(s=d.closest(".product-gallery").find(".vertical-thumbnails"),s.length||(d.parent().after(n),s=d.closest(".product-gallery").find(".vertical-thumbnails")),s.find(".vargal-flatsome-product-gallery-thumb").off()):(s=d.parent().find(".vargal-flatsome-product-gallery-thumb"),s.length||(d.parent().append('<div class="vargal-flatsome-product-gallery-thumb"></div>'),s=d.parent().find(".vargal-flatsome-product-gallery-thumb")),s.off());let g=d.find(".woocommerce-product-gallery__image").length;if(g>1){let l="",e=n.find("img").eq(0);for(let t=0;t<g;t++){let o,c=d.find(".woocommerce-product-gallery__image").eq(t),s=a('<div class="col"><a href="#"></a></div>'),i=a('<div class="vargal-html"></div>');o=c.find("video").length?a("<video></video>"):a("<img/>"),o.attr({src:c.data("thumb"),alt:c.data("thumb-alt"),width:r[t].gallery_thumbnail_src_w||e.attr("width"),height:r[t].gallery_thumbnail_src_h||e.attr("height"),class:"attachment-woocommerce_thumbnail"}),s.find("a").append(o),i.html(s),l+=i.html()}n.hasClass("vertical-thumbnails")?(d.parent().addClass("large-10"),n.find(".vargal-flatsome-product-gallery-thumb").html(l)):n.html(l),s.replaceWith(n)}else s.remove(),n.hasClass("vertical-thumbnails")&&d.parent().removeClass("large-10");return s=n.hasClass("vertical-thumbnails")?d.closest(".product-gallery").find(".vertical-thumbnails .vargal-flatsome-product-gallery-thumb"):d.parent().find(".vargal-flatsome-product-gallery-thumb"),d.find(".woocommerce-product-gallery__wrapper").flickity(d.find(".woocommerce-product-gallery__wrapper").data("flickityOptions")),d.find(".woocommerce-product-gallery__wrapper").on("change.flickity",(function(a,l){let e=d.find(".woocommerce-product-gallery__image").eq(l);e.find("video").length?(e.on("click",(function(a){return a.preventDefault(),a.stopPropagation(),!1})),d.find(".flickity-viewport").css({height:r[l].src_h+"px"}),d.find(".zoom-button ").parent().addClass("vargal-hidden")):d.find(".zoom-button ").parent().removeClass("vargal-hidden")})),s.length&&(s.off(),s.removeData("flickity"),s.find(".col").length<5?s.addClass("slider-no-arrows"):s.removeClass("slider-no-arrows"),s.flickity(s.data("flickityOptions"))),d.off().wc_product_gallery(),!0})),a(document).on("vargal-flatsome-gallery-reset",(function(l,e){let r=a(".vargal-flatsome-product-gallery.vargal-product-gallery-product-"+e);if(!r.length)return!1;if(vargal_params.flatsome_default_product_gallery[e]&&vargal_params.gallery_is_changing[e]&&"default"!==vargal_params.gallery_is_changing[e]){console.log("vargal-flatsome-gallery-reset"),vargal_params.gallery_is_changing[e]="default";let a,l=vargal_params.flatsome_default_product_gallery[e].clone(),t=vargal_params.flatsome_default_product_gallery_thumb[e].clone();r.find(".woocommerce-product-gallery__wrapper").replaceWith(l),t.hasClass("vertical-thumbnails")?(a=r.closest(".product-gallery").find(".vertical-thumbnails"),a.length||(r.parent().after(t),a=r.closest(".product-gallery").find(".vertical-thumbnails"))):(a=r.parent().find(".vargal-flatsome-product-gallery-thumb"),a.length||(r.parent().append('<div class="vargal-flatsome-product-gallery-thumb"></div>'),a=r.parent().find(".vargal-flatsome-product-gallery-thumb"))),1===r.find(".woocommerce-product-gallery__image").length?(a.remove(),t.hasClass("vertical-thumbnails")&&r.parent().removeClass("large-10")):(t.hasClass("vertical-thumbnails")&&r.parent().addClass("large-10"),a.replaceWith(t)),a=t.hasClass("vertical-thumbnails")?r.closest(".product-gallery").find(".vertical-thumbnails .vargal-flatsome-product-gallery-thumb"):r.parent().find(".vargal-flatsome-product-gallery-thumb"),r.find(".woocommerce-product-gallery__wrapper").flickity(r.find(".woocommerce-product-gallery__wrapper").data("flickityOptions")),a.length&&(a.off(),a.removeData("flickity"),a.find(".col").length<5?a.addClass("slider-no-arrows"):a.removeClass("slider-no-arrows"),a.flickity(a.data("flickityOptions"))),r.off().wc_product_gallery()}return!0})))}(jQuery);