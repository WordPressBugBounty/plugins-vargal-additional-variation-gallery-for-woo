jQuery(document).ready((function(e){"use strict";function a(r,s,t){e.ajax({url:vargal_params.ajax_url,type:"POST",dataType:"JSON",data:{action:"vargal_migrate_gallery",step:"migrate",_vargal_nonce:vargal_params.nonce,product_source_meta:e("#vargal-source").val(),page:r,max_page:s},success:function(e){switch(e.status){case"success":t.progress("set percent",parseInt(e.percent)),r<parseInt(e.page)?a(e.page,e.max_page,t):(t.progress("set label",e.message?e.message:"Completed").progress("complete"),e?.message&&jQuery(document.body).trigger("villatheme_show_message",e.message,"success","",!1,5e3));break;case"retry":a(e.page,e.max_page,t);break;default:t.progress("set label",e.message?e.message:vargal_params.i18n_error).progress("set error")}},error:function(e){t.progress("set label",vargal_params.i18n_error).progress("set error")},complete:function(){}})}e(".vi-ui.dropdown:not(.vargal-dropdown-init)").addClass("vargal-dropdown-init").off().dropdown(),e(document).on("click",".vargal-button-migrate",(function(){let r=e(this).closest(".vi-ui.segment"),s=r.find(".vargal-migrate-step-content-2"),t=s.find(".vargal-migrate-progress");r.find(".step").removeClass("active"),r.find(".step.vargal-migrate-step-2").removeClass("disabled").addClass("active"),r.find(".vargal-migrate-step-content").addClass("vargal-hidden"),s.removeClass("vargal-hidden"),t.progress("set percent",1),a(1,1,t)}))}));