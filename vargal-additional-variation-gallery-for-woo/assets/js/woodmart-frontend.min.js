!function(a){"use strict";"undefined"!=typeof vargal_params&&"undefined"!=typeof wc_single_product_params&&"undefined"!=typeof woodmartThemeModule&&(vargal_params.woodmart_default_product_gallery={},vargal_params.woodmart_default_product_gallery_thumb={},vargal_params.override_template&&(wc_single_product_params.flexslider.selector=".vargal-woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image"),a(document).on("wc-product-gallery-before-init",".vargal-product-gallery",function(r,e,l){let t=a(e);if(!t.length)return;if(!t.find(".vargal-woodmart-product-gallery-image").length&&!t.hasClass("vargal-woodmart-product-gallery"))return;let o,d=t.attr("class").split(" ");if(d.length)for(let a of d)if(a.includes("vargal-product-gallery-product-")){o=a.replace("vargal-product-gallery-product-","");break}o&&(vargal_params.woodmart_productImagesGallery||(vargal_params.woodmart_productImagesGallery=woodmartThemeModule.productImagesGallery),t.hasClass("vargal-product-gallery-wrap")?(woodmartThemeModule.productImagesGallery=function(){},t.find(".vargal-woocommerce-product-gallery__wrapper").removeClass("woocommerce-product-gallery__wrapper")):(t.data("vargal_render_type","woodmart"),vargal_params.woodmart_default_product_gallery[o]||(vargal_params.woodmart_default_product_gallery[o]=t.find(".wd-gallery-images").clone()),vargal_params.woodmart_default_product_gallery_thumb[o]||(vargal_params.woodmart_default_product_gallery_thumb[o]=t.find(".wd-gallery-thumb").clone())),t.addClass("vargal-woodmart-product-gallery vargal-product-gallery-wrap-not-refresh"))}),a(document).on("wc-product-gallery-after-init",".vargal-product-gallery",function(r,e,l){let t=a(e);vargal_params?.woodmart_productImagesGallery&&t.hasClass("vargal-product-gallery-wrap")&&(woodmartThemeModule.productImagesGallery=vargal_params.woodmart_productImagesGallery)}),a(document).on("vargal-woodmart-gallery-render",function(r,e,l,t,o,d){let g=a(".vargal-woodmart-product-gallery.vargal-product-gallery-product-"+e);if(console.log("vargal-woodmart-gallery-render : "+e),!g.length)return!1;let c=vargal_params.woodmart_default_product_gallery[e].clone();c.find(".wd-carousel-wrap").html("");for(let r in l){let t=l[r],o=a('<div class="wd-carousel-item"></div>');o.attr({"data-thumb":t.gallery_thumbnail_src,"data-thumb-alt":t.alt,"data-thumb-srcset":t.gallery_thumbnail_srcset,"data-thumb-sizes":t.gallery_thumbnail_sizes}),t?.is_video?(o.append('<div class="woocommerce-product-gallery__image" data-thumb="'+t.gallery_thumbnail_src+'"></div>'),o.find(".woocommerce-product-gallery__image").append('<a href="'+t.full_src+'" data-elementor-open-lightbox="no"></a>'),o.addClass("vargal-video"),o.find("a").append('<video controls><source src="'+t.full_src+'" type="'+t.metadata.mime_type+'"></video>'),o.find("a").append('<img class="vargal-hidden wd-product-video" src="'+t.gallery_thumbnail_src+'"/>'),o.find("img").attr({"data-large_image_height":t.full_src_h,"data-large_image_width":t.full_src_w,"data-large_image":t.full_src,"data-src":t.full_src,alt:t.alt,"data-caption":t.caption,title:t.title,width:t.src_w,height:t.src_h,src:t.src}),t?.poster&&o.find("video").attr({poster:t.poster})):(o.append('<figure class="woocommerce-product-gallery__image" data-thumb="'+t.gallery_thumbnail_src+'"></figure>'),o.find("figure").append('<a href="'+t.full_src+'" data-elementor-open-lightbox="no"></a>'),o.find("a").append(vargal_params.default_product_gallery[e].find("img").eq(0).clone()),o.find("img").attr({"data-large_image_height":t.full_src_h,"data-large_image_width":t.full_src_w,"data-large_image":t.full_src,"data-src":t.full_src,alt:t.alt,"data-caption":t.caption,title:t.title,sizes:t.sizes,srcset:t.srcset,width:t.src_w,height:t.src_h,src:t.src}),["image/gif"].includes(t.mime_type)&&(o.find("img").removeAttr("srcset"),o.find("img").attr({src:t.full_src})),t.srcset||o.find("img").removeAttr("srcset")),c.find(".wd-carousel-wrap").append(o)}return g.find(".wd-gallery-images").replaceWith(c),a(".woocommerce-product-gallery__image").trigger("zoom.destroy"),woodmartThemeModule.$document.trigger("wdReplaceMainGallery"),woodmartThemeModule.$document.trigger("wdReplaceMainGalleryNotQuickView"),woodmartThemeModule.$window.trigger("resize"),!0}),a(document).on("vargal-woodmart-gallery-reset",function(r,e){let l=a(".vargal-woodmart-product-gallery.vargal-product-gallery-product-"+e);if(!l.length)return!1;if(vargal_params.default_product_gallery[e]&&vargal_params.gallery_is_changing[e]&&"default"!==vargal_params.gallery_is_changing[e]){console.log("vargal-goya-gallery-reset : "+e),vargal_params.gallery_is_changing[e]="default",woodmartThemeModule.$document.trigger("wdResetVariation");let r=vargal_params.woodmart_default_product_gallery[e].clone();l.find(".wd-gallery-images").replaceWith(r),a(".woocommerce-product-gallery__image").trigger("zoom.destroy"),woodmartThemeModule.$document.trigger("wdReplaceMainGallery"),woodmartThemeModule.$document.trigger("wdReplaceMainGalleryNotQuickView"),woodmartThemeModule.$window.trigger("resize")}return!0}))}(jQuery);